DELIMITER //
DROP PROCEDURE IF EXISTS this_procedure;
CREATE PROCEDURE this_procedure()
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION BEGIN ROLLBACK; RESIGNAL; END;
    DECLARE EXIT HANDLER FOR SQLWARNING BEGIN ROLLBACK; RESIGNAL; END;
    DECLARE CONTINUE HANDLER FOR 1091 BEGIN END;
    DECLARE CONTINUE HANDLER FOR 1054 BEGIN END;
    DECLARE EXIT HANDLER FOR 1062 BEGIN ROLLBACK; RESIGNAL; END;
    START TRANSACTION;
        SET foreign_key_checks = 0;
        DROP TABLE IF EXISTS email_b2b_quote, magento_salesrule_filter, magento_banner, magento_banner_content, magento_banner_catalogrule, magento_banner_salesrule, magento_banner_customersegment, magento_catalogevent_event, magento_catalogevent_event_image, magento_catalogpermissions, magento_catalogpermissions_index, magento_catalogpermissions_index_product, magento_catalogpermissions_index_product_replica, magento_catalogpermissions_index_tmp, magento_catalogpermissions_index_product_tmp, magento_catalogpermissions_index_replica, quote_preview, magento_customerbalance, magento_customerbalance_history, magento_customercustomattributes_sales_flat_order, magento_customercustomattributes_sales_flat_order_address, magento_customercustomattributes_sales_flat_quote, magento_customercustomattributes_sales_flat_quote_address, magento_customersegment_segment, magento_customersegment_website, magento_customersegment_customer, magento_customersegment_event, magento_giftcard_amount, magento_giftcardaccount, magento_giftcardaccount_pool, magento_giftcardaccount_history, magento_giftregistry_type, magento_giftregistry_type_info, magento_giftregistry_label, magento_giftregistry_entity, magento_giftregistry_item, magento_giftregistry_person, magento_giftregistry_data, magento_giftregistry_item_option, magento_giftwrapping, magento_giftwrapping_store_attributes, magento_giftwrapping_website, magento_invitation, magento_invitation_status_history, magento_invitation_track, magento_logging_event, magento_logging_event_changes, negotiable_quote, negotiable_quote_grid, negotiable_quote_comment, negotiable_quote_comment_attachment, negotiable_quote_history, negotiable_quote_item, negotiable_quote_purged_content, pagebuilder_template, purchase_order, purchase_order_approved_by, purchase_order_log, purchase_order_comment, purchase_order_rule, purchase_order_rule_approver, purchase_order_rule_applies_to, purchase_order_applied_rule, purchase_order_applied_rule_approver, magento_reminder_rule, magento_reminder_rule_website, magento_reminder_template, magento_reminder_rule_coupon, magento_reminder_rule_log, requisition_list, requisition_list_item, magento_reward, magento_reward_history, magento_reward_rate, magento_reward_salesrule, magento_sales_order_grid_archive, magento_sales_invoice_grid_archive, magento_sales_creditmemo_grid_archive, magento_sales_shipment_grid_archive, magento_scheduled_operations, staging_update, shared_catalog, shared_catalog_product_item, sharedcatalog_category_permissions, support_backup, support_backup_item, support_report, magento_targetrule, magento_targetrule_customersegment, magento_targetrule_product, magento_targetrule_index, magento_targetrule_index_related, magento_targetrule_index_upsell, magento_targetrule_index_crosssell, magento_targetrule_index_crosssell_product, magento_targetrule_index_related_product, magento_targetrule_index_upsell_product, magento_versionscms_increment, magento_versionscms_hierarchy_node, magento_versionscms_hierarchy_metadata, magento_versionscms_hierarchy_lock, visual_merchandiser_rule, negotiable_quote_company_config, purchase_order_company_config, salesrule_rule_cl, targetrule_product_rule_cl, targetrule_rule_product_cl;
        SET foreign_key_checks = 1;
    COMMIT;
END
//
DELIMITER ;
CALL this_procedure();