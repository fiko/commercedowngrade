DELIMITER //
DROP PROCEDURE IF EXISTS this_procedure;
CREATE PROCEDURE this_procedure()
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION BEGIN ROLLBACK; RESIGNAL; END;
    DECLARE EXIT HANDLER FOR SQLWARNING BEGIN ROLLBACK; RESIGNAL; END;
    DECLARE CONTINUE HANDLER FOR 1091 BEGIN END;
    DECLARE CONTINUE HANDLER FOR 1054 BEGIN END;
    DECLARE EXIT HANDLER FOR 1062 BEGIN ROLLBACK; RESIGNAL; END;
    START TRANSACTION;
        DELETE FROM setup_module WHERE module="Magento_AdminGws" OR module="Magento_AdminGwsConfigurableProduct" OR module="Magento_AdminGwsStaging" OR module="Magento_AdvancedCatalog" OR module="Magento_AdvancedCheckout" OR module="Magento_AdvancedRule" OR module="Magento_AdvancedSalesRule" OR module="Magento_AwsS3CustomerCustomAttributes" OR module="Magento_Banner" OR module="Magento_BannerCustomerSegment" OR module="Magento_BundleImportExportStaging" OR module="Magento_BundleStaging" OR module="Magento_CatalogEvent" OR module="Magento_CatalogImportExportStaging" OR module="Magento_CatalogInventoryStaging" OR module="Magento_CatalogPermissions" OR module="Magento_CatalogPermissionsGraphQl" OR module="Magento_CatalogRuleStaging" OR module="Magento_CatalogStaging" OR module="Magento_CatalogStagingGraphQl" OR module="Magento_CatalogUrlRewriteStaging" OR module="Magento_CheckoutAddressSearch" OR module="Magento_CheckoutAddressSearchGiftRegistry" OR module="Magento_CheckoutStaging" OR module="Magento_CmsStaging" OR module="Magento_ConfigurableProductStaging" OR module="Magento_CustomAttributeManagement" OR module="Magento_CustomerBalance" OR module="Magento_CustomerBalanceGraphQl" OR module="Magento_CustomerCustomAttributes" OR module="Magento_CustomerFinance" OR module="Magento_CustomerSegment" OR module="Magento_DownloadableStaging" OR module="Magento_ElasticsearchCatalogPermissions" OR module="Magento_Enterprise" OR module="Magento_GiftCard" OR module="Magento_GiftCardAccount" OR module="Magento_GiftCardAccountGraphQl" OR module="Magento_GiftCardGraphQl" OR module="Magento_GiftCardImportExport" OR module="Magento_GiftCardStaging" OR module="Magento_GiftMessageStaging" OR module="Magento_GiftRegistry" OR module="Magento_GiftWrapping" OR module="Magento_GiftWrappingGraphQl" OR module="Magento_GiftWrappingStaging" OR module="Magento_GoogleOptimizerStaging" OR module="Magento_GoogleTagManager" OR module="Magento_GroupedProductStaging" OR module="Magento_Invitation" OR module="Magento_LayeredNavigationStaging" OR module="Magento_Logging" OR module="Magento_LoginAsCustomerLogging" OR module="Magento_LoginAsCustomerWebsiteRestriction" OR module="Magento_MediaContentCatalogStaging" OR module="Magento_MsrpStaging" OR module="Magento_MultipleWishlist" OR module="Magento_MultipleWishlistGraphQl" OR module="Magento_PaymentStaging" OR module="Magento_PersistentHistory" OR module="Magento_PricePermissions" OR module="Magento_ProductVideoStaging" OR module="Magento_PromotionPermissions" OR module="Magento_QuoteGiftCardOptions" OR module="Magento_Reminder" OR module="Magento_RemoteStorageCommerce" OR module="Magento_ResourceConnections" OR module="Magento_ReviewStaging" OR module="Magento_Reward" OR module="Magento_RewardGraphQl" OR module="Magento_RewardStaging" OR module="Magento_Rma" OR module="Magento_RmaGraphQl" OR module="Magento_RmaStaging" OR module="Magento_SalesArchive" OR module="Magento_SalesRuleStaging" OR module="Magento_ScalableCheckout" OR module="Magento_ScalableInventory" OR module="Magento_ScalableOms" OR module="Magento_ScheduledImportExport" OR module="Magento_SearchStaging" OR module="Magento_Staging" OR module="Magento_StagingGraphQl" OR module="Magento_Support" OR module="Magento_Swat" OR module="Magento_TargetRule" OR module="Magento_TargetRuleGraphQl" OR module="Magento_Tinymce3Banner" OR module="Magento_VersionsCms" OR module="Magento_VersionsCmsUrlRewrite" OR module="Magento_VersionsCmsUrlRewriteGraphQl" OR module="Magento_VisualMerchandiser" OR module="Magento_WebsiteRestriction" OR module="Magento_WeeeStaging" OR module="Magento_WishlistGiftCard" OR module="Magento_B2b" OR module="Magento_BundleNegotiableQuote" OR module="Magento_BundleRequisitionList" OR module="Magento_BundleRequisitionListGraphQl" OR module="Magento_BundleSharedCatalog" OR module="Magento_CheckoutAddressSearchNegotiableQuote" OR module="Magento_CheckoutAgreementsNegotiableQuote" OR module="Magento_CheckoutAgreementsPurchaseOrder" OR module="Magento_Company" OR module="Magento_CompanyCredit" OR module="Magento_CompanyCreditGraphQl" OR module="Magento_CompanyGraphQl" OR module="Magento_CompanyPayment" OR module="Magento_CompanyShipping" OR module="Magento_ConfigurableNegotiableQuote" OR module="Magento_ConfigurableRequisitionList" OR module="Magento_ConfigurableRequisitionListGraphQl" OR module="Magento_ConfigurableSharedCatalog" OR module="Magento_DownloadableRequisitionListGraphQl" OR module="Magento_GiftCardNegotiableQuote" OR module="Magento_GiftCardRequisitionList" OR module="Magento_GiftCardRequisitionListGraphQl" OR module="Magento_GiftCardSharedCatalog" OR module="Magento_GroupedRequisitionList" OR module="Magento_GroupedSharedCatalog" OR module="Magento_NegotiableQuote" OR module="Magento_NegotiableQuoteSharedCatalog" OR module="Magento_NegotiableQuoteWeee" OR module="Magento_OrderHistorySearch" OR module="Magento_PaypalPurchaseOrder" OR module="Magento_PurchaseOrder" OR module="Magento_PurchaseOrderRule" OR module="Magento_QuickOrder" OR module="Magento_RequisitionList" OR module="Magento_RequisitionListGraphQl" OR module="Magento_SharedCatalog" OR module="Magento_SharedCatalogGraphQl";
    COMMIT;
END
//
DELIMITER ;
CALL this_procedure();
